@using DRCDesignerWebApplication.Models

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "index";
}
@{
    Layout = "_Layout";
}

<style>
    #gridContainer {
        margin-left: 50px;
    }
</style>

@(Html.DevExtreme().DataGrid<DRCDesignerWebApplication.Models.Role>().ID("gridContainer")
                                            .ShowBorders(true)
                                            .Paging(paging => paging.PageSize(6))
                                             .Width(1200)
                                            .Editing(editing =>
                                            {
                                                editing.Mode(GridEditMode.Cell);
                                                editing.AllowAdding(true);
                                                editing.AllowDeleting(true);
                                                editing.AllowUpdating(true);

                                            })
                                            .Columns(columns =>
                                            {
                                                columns.AddFor(m => m.RoleName);
                                                columns.AddFor(m => m.SubdomainId)

                                                 .Width(160).HeaderCellTemplate("Subdomain")
                                                 .Lookup(lookup => lookup
                                                 .DataSource(d => d.Mvc().Controller("DataGridSubdomainsLookup").LoadAction("Get").Key("ID"))
                                                 .DisplayExpr("SubdomainName").ValueExpr("ID").AllowClearing(true)).Width(200);
                                            })
                                            .DataSource(d => d.Mvc()
                                                .Controller("Roles")
                                                .LoadAction("Get")
                                                .UpdateAction("Put")
                                                .InsertAction("Post")
                                                .DeleteAction("Delete")
                                                .Key("ID")
                                            ).SearchPanel(searchPanel => searchPanel
                           .Visible(true)
                           .Width(240)
                           .Placeholder("Search...")
                        )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                .OnRowRemoved(@<text> function(e) { logEvent("RowRemoved"); } </text>)
)


<script>
    function logEvent(eventName) {
        var logList = $("#events ul"),
            newItem = $("<li>", { text: eventName });
        logList.prepend(newItem);
    }
</script>