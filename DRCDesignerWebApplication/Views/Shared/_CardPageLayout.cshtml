<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>web designer</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />

    <link href="~/css/devextreme/bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link href="~/css/devextreme/dx.common.css" rel="stylesheet" />
    <link href="~/css/devextreme/dx.material.blue.light.css" rel="stylesheet" />

    <script src="~/js/devextreme/jquery.js"></script>
    <script src="~/js/devextreme/bootstrap.js"></script>

    <script src="~/js/devextreme/cldr.js"></script>
    <script src="~/js/devextreme/cldr/event.js"></script>
    <script src="~/js/devextreme/cldr/supplemental.js"></script>
    <script src="~/js/devextreme/cldr/unresolved.js"></script>

    <script src="~/js/devextreme/globalize.js"></script>
    <script src="~/js/devextreme/globalize/message.js"></script>
    <script src="~/js/devextreme/globalize/number.js"></script>
    <script src="~/js/devextreme/globalize/currency.js"></script>
    <script src="~/js/devextreme/globalize/date.js"></script>

    @* JSZip for client side export *@
    @*<script src="~/js/devextreme/jszip.js"></script>*@

    <script src="~/js/devextreme/dx.all.js"></script>
    <script src="~/js/devextreme/vectormap-data/world.js"></script>
    <script src="~/js/devextreme/aspnet/dx.aspnet.data.js"></script>
    <script src="~/js/devextreme/aspnet/dx.aspnet.mvc.js"></script>
    <style>
        .dx-drawer-panel-content, .dx-overlay-content {
            background-color: lightgray;
            margin-right: -10px;
        }

        #layout-toolbar {
            background-color: rgba(191, 191, 191, .15);
            padding: 5px 5px;
            margin-top:-30px;
            height:60px;
        }
 
        #layout-toolbar .dx-toolbar-button .dx-button {
            background-color: rgba(191, 191, 191, -0.15);
            border: none;
        }
 
        #layout-toolbar .dx-toolbar-button > .dx-toolbar-item-content {
            margin-left: -7px;
        }
 
        #layout-toolbar .dx-list-item-icon {
            margin-right: 10px;
        }
     

    </style>

</head>
<body>

    @(Html.DevExtreme().Toolbar()
              .ID("layout-toolbar")
              .Items(items =>
              {
                  items.Add().Widget(w => w.Button()
                      .Icon("menu")
                      .OnClick("button_clickHandler")
                      ).Location(ToolbarItemLocation.Before);
              })
    )


    @(Html.DevExtreme().Drawer()
              .ID("layout-drawer")
              .MinSize(50)
              .Height(675)

              .Opened(new JS("JSON.parse(sessionStorage.getItem('drawerOpened'))"))
              .RevealMode(DrawerRevealMode.Expand)
              .OpenedStateMode(DrawerOpenedStateMode.Shrink)
              .Template(@<text>
                @(Html.DevExtreme().List()
                          .Width(200)
                          .OnInitialized("list_onInitialized")
                          .Items(items =>
                          {
                                                items.Add().Text("Home").Icon("home").Option("path", @Url.Action("Index", "Home"));
                                                items.Add().Text("Subdomains").Icon("folder").Option("path", @Url.Action("Index", "Subdomains"));
                                                items.Add().Text("Roles").Icon("card").Option("path", @Url.Action("Index", "Roles"));
                                                items.Add().Text("Cards").Icon("unselectall").Option("path", @Url.Action("Index", "DrcCards"));


                                            })
                          .KeyExpr("path")
                          .SelectionMode(ListSelectionMode.Single)
                          .OnSelectionChanged("list_onSelectionChanged")
                )
            </text>)
          .Content(@<text>@await Component.InvokeAsync("SubdomainTab")
                       @RenderBody()</text>)
    )

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2019 - DRC Designer - <a asp-area="" asp-controller="Home" asp-action="Index">More</a>
        </div>
    </footer>

    <script type="text/javascript">
    function button_clickHandler() {
        var drawer = $("#layout-drawer").dxDrawer("instance");
        drawer.toggle();
        sessionStorage.setItem("drawerOpened", JSON.stringify(drawer.option("opened")));
    }

    function list_onSelectionChanged(e) {
        document.location.pathname = e.addedItems[0].path;
    }

    function list_onInitialized(e) {
        var t = "@Url.Action()";
        e.component.option("selectedItemKeys", ["@Url.Action()"])
    }


    </script>
    <script>

        function menuItem_click(data) {
            var item = data.itemData;
            location.href = "/DrcCards/index/" + item.ID;

        }
    </script>
</body>
</html>
